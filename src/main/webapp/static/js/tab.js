(function(a,b){a.mkApp("tab",{init:function(){this.container=a(this.options.container);this.triggers=this.container.find(".tab-hd ."+this.options.triggerClass);this.panels=this.container.find(".tab-bd ."+this.options.panelClass);this.bindEvent();this.setIndex(this.getIndex());this.preIndex=this.index;this.changeTo(this.index)},bindEvent:function(){var c=this;this.triggers.bind(c.options.eventType,function(e){e.preventDefault();var d=a(this);if(d.hasClass(c.options.currentClass)){return}c.change(d)})},change:function(d,e){var g=this,f=this.options.currentClass,c=this.options.effects[0].split(":"),h=this.options.effects[1].split(":");setTimeout(function(){g.preIndex=g.index;g.index=a.isNumber(e)?e:g.triggers.index(d);var j=function(){var k=g.panels.eq(g.index);d.addClass(f);k[c[0]](c[1]);g.trigger("change",{trigger:d,index:g.index,pannel:k})},i=g.panels.eq(g.preIndex);g.triggers.eq(g.preIndex).removeClass(f);if(h[1]){i[h[0]](h[1],j)}else{if(h[0]=="hide"){i.hide();j()}else{i[h[0]](j)}}},g.options.delayTime)},changeTo:function(c){if(!a.isNumber(c)||c<0||c==this.index){return}this.change(this.triggers.eq(c),c)},getIndex:function(){return(a.isNumber(this.index)&&this.index>=0)?this.index:this.triggers.index(this.triggers.filter("."+this.options.currentClass))},setIndex:function(c){if(!a.isNumber(c)){return}this.index=c},destroy:function(){this.triggers.unbind();this.superClass.destroy.apply(this)}}).defaults={container:"",currentClass:"current",triggerClass:"trigger",panelClass:"tab-panel",eventType:"click",effects:["show","hide"],delayTime:100}})(jQuery);
